(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+ego":function(u,o,a){"use strict";a.r(o);var O=a("Q9mQ"),P=a("diRs"),na=a("Telt"),I=a("Tckk"),_a=a("lUTK"),D=a("BvKs"),oa=a("Pwec"),C=a("CtXQ"),la=a("+L6B"),R=a("2/Rp"),ra=a("miYZ"),d=a("tsqr"),W=a("9og8"),M=a("tJVT"),sa=a("B9cy"),i=a("Ol7k"),l=a("q1tI"),e=a.n(l),c=a("7DNP"),Ea=a.n(c),p=a("/MKj"),j=a("p46w"),r=a.n(j),h=a("zuR4"),S=a("34ay"),b=a("PUTc"),da=a.n(b),g=a("2V6T"),F=i.a.Header,N=i.a.Content,x=[{name:"AllData",path:"all"},{name:"User",path:"user"}],z=[{name:"Balance",path:"balance"},{name:"Deposit",path:"deposit"},{name:"Withdraw",path:"withdraw"},{name:"Transfer",path:"transfer"},{name:"User",path:"user"}],f=[{name:"Login",path:"login"}];function J(n){var v=Object(l.useState)(""),T=Object(M.a)(v,2),Q=T[0],V=T[1],H=Object(l.useState)(f),A=Object(M.a)(H,2),y=A[0],G=A[1],X=n.children,m=n.history,ia=n.dispatch,s=n.location.pathname,L=m.location.query,U=()=>{var t=r.a.get("role");return t==="1"?x:z},Y=function(){var t=Object(W.a)(function*(_){try{var E=yield h.a.post("https://github.com/login/oauth/access_token",{client_id:g.a.client_id,client_secret:g.a.client_secret,code:_},{headers:{accept:"application/json"}}),ea=E.data.access_token,B=yield h.a.get("https://api.github.com/user",{headers:{Authorization:"token "+ea}});B||d.a.error("\u83B7\u53D6github\u7528\u6237\u4FE1\u606F\u5931\u8D25"),console.log(B)}catch(ta){console.log(ta),d.a.error("github\u9A8C\u8BC1\u5931\u8D25")}});return function(E){return t.apply(this,arguments)}}(),Z=()=>{if(s){var t=window.localStorage.getItem("token")?U():y,_=t.find(E=>"/".concat(E.path)===s);_||m.push("/overview"),V(_?_.path:"")}};Object(l.useEffect)(()=>{Z()},[s]),Object(l.useEffect)(()=>{L.code&&Y(L.code);var t=window.localStorage.getItem("token");G(t?U():f)},[window.localStorage.getItem("token"),s]);var $=()=>{Object(S.a)(),m.push("/"),d.a.info("\u60A8\u5DF2\u7ECF\u9000\u51FA\u767B\u5F55")},k=window.localStorage.getItem("token"),K=r.a.get("username"),w=r.a.get("email"),q=r.a.get("role"),aa=e.a.createElement("div",null,e.a.createElement("p",null,"Username\uFF1A",K),e.a.createElement("p",null,"Email",w),e.a.createElement("p",null,"Role\uFF1A",q==="1"?"admin":"customer"),e.a.createElement(R.a,{type:"primary",onClick:$},"logout"));return e.a.createElement(i.a,null,e.a.createElement(F,{className:"header"},e.a.createElement("div",null,e.a.createElement(c.Link,{to:"/"},e.a.createElement(C.a,{style:{color:"#1890ff",fontSize:22,padding:"0 20px 0 0"},type:"bank"}))),e.a.createElement(D.a,{theme:"dark",selectedKeys:[Q],mode:"horizontal"},y.map(t=>e.a.createElement(D.a.Item,{key:t.path},e.a.createElement(c.Link,{to:t.path},t.name)))),k&&e.a.createElement(P.a,{content:aa,placement:"topLeft",title:"\u7528\u6237\u4FE1\u606F",trigger:"hover"},e.a.createElement(I.a,{className:"user",style:{verticalAlign:"middle",backgroundColor:"#1890ff"},size:"large"},K))),e.a.createElement(N,{className:"content"},X))}o.default=Object(p.c)(n=>{var v=n.global_login;return{loginModel:v}})(J)},"2V6T":function(u,o,a){"use strict";a.d(o,"a",function(){return O});var O={client_id:"068c149f6ddb805da1b2",client_secret:"04aa7adee127d0d6f59e287faffc3473d6ec436a",redirect_uri:"http://127.0.0.1:8000/all"},P={key:"B31F2A75FBF94099",iv:"1234567890123456"}},PUTc:function(u,o,a){}}]);
